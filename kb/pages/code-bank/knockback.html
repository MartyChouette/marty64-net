<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Knockback - VG101 Knowledge Base</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/style.css">
  <style>
    .register{margin:2rem 0;border-radius:8px;overflow:hidden}
    .register-header{padding:1rem 1.5rem;font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.05em;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .register-header::after{content:'â–¼';font-size:.75rem;transition:transform .2s}
    .register.collapsed .register-header::after{transform:rotate(-90deg)}
    .register-content{padding:1.5rem;border-top:1px solid rgba(0,0,0,0.1)}
    .register.collapsed .register-content{display:none}
    .register--practice{background:#f0fdfa;border:2px solid #14b8a6}
    .register--practice .register-header{background:#14b8a6;color:#fff}
    .register--practice .register-content{border-color:#99f6e4}
    .register--craft{background:#eff6ff;border:2px solid #3b82f6}
    .register--craft .register-header{background:#3b82f6;color:#fff}
    .register--craft .register-content{border-color:#bfdbfe}
    .register--theory{background:#faf5ff;border:2px solid #a855f7}
    .register--theory .register-header{background:#a855f7;color:#fff}
    .register--theory .register-content{border-color:#e9d5ff}
    .register-content h3{margin-top:0}
    .register-content h3:not(:first-child){margin-top:1.5rem}
    .register-label{font-size:.75rem;opacity:.8;font-weight:400;text-transform:none;letter-spacing:normal}
    .term{color:#c49a2e;text-decoration:underline;text-decoration-style:dotted;text-underline-offset:2px}
    .term:hover{color:#d97706}
  </style>
</head>
<body>
  <button class="mobile-nav-toggle" aria-label="Toggle navigation menu">
    <span></span><span></span><span></span>
  </button>

  <div class="site-container">
    <nav class="sidebar">
      <a href="../../../index.html" class="site-title">&larr; marty64.net</a>
      <p class="site-subtitle">VG101 Knowledge Base</p>

      <a href="../../index.html" class="nav-home">&larr; VG101 Home</a>

      <div class="nav-section">
        <div class="nav-section-title">Core Framework</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../framework/gesture.html" class="nav-link">Gesture</a></li>
          <li class="nav-item"><a href="../framework/the-four-as.html" class="nav-link">The 4 A's</a></li>
          <li class="nav-item"><a href="../framework/aesthetic-heritage.html" class="nav-link">Aesthetic Heritage</a></li>
          <li class="nav-item"><a href="../framework/permissions.html" class="nav-link">Permissions</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Foundations</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../foundations/what-makes-a-videogame.html" class="nav-link">What Makes a Videogame</a></li>
          <li class="nav-item"><a href="../foundations/the-weekly-rhythm.html" class="nav-link">The Weekly Rhythm</a></li>
          <li class="nav-item"><a href="../foundations/player-psychology.html" class="nav-link">Player Psychology</a></li>
          <li class="nav-item"><a href="../foundations/the-design-lens.html" class="nav-link">The Design Lens</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Narrative</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../narrative/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../narrative/environmental-storytelling.html" class="nav-link">Environmental Storytelling</a></li>
          <li class="nav-item"><a href="../narrative/branching-consequence.html" class="nav-link">Branching &amp; Consequence</a></li>
          <li class="nav-item"><a href="../narrative/dialogue-systems.html" class="nav-link">Dialogue Systems</a></li>
          <li class="nav-item"><a href="../narrative/ludonarrative-harmony.html" class="nav-link">Ludonarrative Harmony</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Level Design</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../level-design/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../level-design/spatial-communication.html" class="nav-link">Spatial Communication</a></li>
          <li class="nav-item"><a href="../level-design/pacing-flow.html" class="nav-link">Pacing &amp; Flow</a></li>
          <li class="nav-item"><a href="../level-design/guidance-without-handholding.html" class="nav-link">Guidance Without Hand-Holding</a></li>
          <li class="nav-item"><a href="../level-design/verticality-sightlines.html" class="nav-link">Verticality &amp; Sight Lines</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Systems</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../systems/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../systems/economy-resources.html" class="nav-link">Economy &amp; Resources</a></li>
          <li class="nav-item"><a href="../systems/progression-systems.html" class="nav-link">Progression Systems</a></li>
          <li class="nav-item"><a href="../systems/balance-philosophy.html" class="nav-link">Balance Philosophy</a></li>
          <li class="nav-item"><a href="../systems/emergent-behavior.html" class="nav-link">Emergent Behavior</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Pedagogy</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../pedagogy/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../pedagogy/play-name-make-reflect.html" class="nav-link">Play, Name, Make, Reflect</a></li>
          <li class="nav-item"><a href="../pedagogy/why-unity.html" class="nav-link">Why Unity</a></li>
          <li class="nav-item"><a href="../pedagogy/the-final-project.html" class="nav-link">The Final Project</a></li>
          <li class="nav-item"><a href="../pedagogy/debugging-as-literacy.html" class="nav-link">Debugging as Literacy</a></li>
          <li class="nav-item"><a href="../pedagogy/accessibility-as-craft.html" class="nav-link">Accessibility as Craft</a></li>
          <li class="nav-item"><a href="../pedagogy/code-as-material.html" class="nav-link">Code as Material</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Code Bank</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="input-setup.html" class="nav-link">Input Setup</a></li>
          <li class="nav-item"><a href="basic-jump.html" class="nav-link">Basic Jump</a></li>
          <li class="nav-item"><a href="variable-jump.html" class="nav-link">Variable Jump</a></li>
          <li class="nav-item"><a href="double-jump.html" class="nav-link">Double Jump</a></li>
          <li class="nav-item"><a href="coyote-time.html" class="nav-link">Coyote Time</a></li>
          <li class="nav-item"><a href="input-buffer.html" class="nav-link">Input Buffer</a></li>
          <li class="nav-item"><a href="dash.html" class="nav-link">Dash</a></li>
          <li class="nav-item"><a href="hitstop.html" class="nav-link">Hitstop</a></li>
          <li class="nav-item"><a href="knockback.html" class="nav-link active">Knockback</a></li>
          <li class="nav-item"><a href="squash-stretch.html" class="nav-link">Squash &amp; Stretch</a></li>
          <li class="nav-item"><a href="screen-shake.html" class="nav-link">Screen Shake</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Case Studies</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../case-studies/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../case-studies/celeste-dash.html" class="nav-link">Celeste: Dash</a></li>
          <li class="nav-item"><a href="../case-studies/celeste-assist-mode.html" class="nav-link">Celeste: Assist Mode</a></li>
          <li class="nav-item"><a href="../case-studies/dark-souls-bonfire.html" class="nav-link">Dark Souls: Bonfire</a></li>
          <li class="nav-item"><a href="../case-studies/hades-god-mode.html" class="nav-link">Hades: God Mode</a></li>
          <li class="nav-item"><a href="../case-studies/portal-level-one.html" class="nav-link">Portal: Level One</a></li>
          <li class="nav-item"><a href="../case-studies/undertale-genocide.html" class="nav-link">Undertale: Genocide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Resources</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../glossary.html" class="nav-link">Glossary</a></li>
          <li class="nav-item"><a href="../references.html" class="nav-link">References</a></li>
        </ul>
      </div>
    </nav>

    <main class="main-content">
      <div class="content-wrapper">
        <nav class="breadcrumb">
          <a href="../../index.html">VG101</a> / <a href="index.html">Code Bank</a> / Knockback
        </nav>

        <h1>Knockback</h1>

        <p class="lead">
          Push an entity away when hit. The physical consequence of damage. Creates space, shows impact, and can create environmental hazards.
        </p>

        <!-- PRACTICE REGISTER -->
        <div class="register register--practice">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Practice <span class="register-label">- what you do</span>
          </div>
          <div class="register-content">
            <h3>The Feel</h3>
            <p>Knockback creates <strong>physical consequence</strong>. Damage isn't just a number going down - it's being pushed back, losing ground, potentially falling into danger. It makes combat spatial.</p>
            <p>Good knockback also creates opportunities: knock an enemy off a ledge, into spikes, or into another enemy.</p>

            <h3>Exposed Variables</h3>
            <table>
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Type</th>
                  <th>Default</th>
                  <th>What it does</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>knockbackForce</code></td>
                  <td>float</td>
                  <td>8.0</td>
                  <td>Horizontal push force</td>
                </tr>
                <tr>
                  <td><code>knockbackUp</code></td>
                  <td>float</td>
                  <td>4.0</td>
                  <td>Vertical lift during knockback</td>
                </tr>
                <tr>
                  <td><code>hitstunDuration</code></td>
                  <td>float</td>
                  <td>0.2</td>
                  <td>Time target can't act after hit</td>
                </tr>
                <tr>
                  <td><code>knockbackDecay</code></td>
                  <td>float</td>
                  <td>10.0</td>
                  <td>How fast knockback velocity decays</td>
                </tr>
              </tbody>
            </table>

            <h3>Tuning Guide</h3>

            <p><strong>For light hit reactions:</strong></p>
            <ul>
              <li><code>knockbackForce</code> = 3 - 5</li>
              <li><code>knockbackUp</code> = 0 - 2</li>
              <li><code>hitstunDuration</code> = 0.1</li>
              <li>Quick recovery, fast combat</li>
            </ul>
            <p><em>Reference: Hack-and-slash, character action games</em></p>

            <p><strong>For heavy, consequential hits:</strong></p>
            <ul>
              <li><code>knockbackForce</code> = 10 - 15</li>
              <li><code>knockbackUp</code> = 5 - 8</li>
              <li><code>hitstunDuration</code> = 0.3 - 0.5</li>
              <li>Major displacement, time to reposition</li>
            </ul>
            <p><em>Reference: Smash Bros., platform fighters</em></p>

            <p><strong>For environmental kill potential:</strong></p>
            <ul>
              <li>High <code>knockbackForce</code></li>
              <li>Significant <code>knockbackUp</code> (launches into air)</li>
              <li>Design levels with hazards at edges</li>
            </ul>

            <h3>Pseudocode</h3>
            <details class="code-block">
              <summary>Pseudocode</summary>
            <pre><code>On Hit:
  - Calculate direction from attacker to target
  - Apply velocity: (direction * knockbackForce) + (up * knockbackUp)
  - Start hitstun timer
  - Disable target's movement/actions

Every Frame during hitstun:
  - Decay knockback velocity
  - Prevent target actions

On hitstun end:
  - Restore target control</code></pre>
            </details>

            <h3>Unity Setup (2D)</h3>
            <ol>
              <li><strong>Setup the Target (entity that receives knockback):</strong>
                <ul>
                  <li>Add <code>Rigidbody2D</code> (Gravity Scale: 3, Freeze Rotation Z: checked)</li>
                  <li>Add <code>Collider2D</code> (BoxCollider2D or CapsuleCollider2D)</li>
                  <li>Add the <code>KnockbackReceiver2D.cs</code> script below</li>
                </ul>
              </li>
              <li><strong>From Attack Scripts:</strong>
                <ul>
                  <li>Get target's KnockbackReceiver2D component</li>
                  <li>Call <code>ApplyKnockback(attackerPosition, force, upForce)</code></li>
                  <li>Or use the preset methods for light/medium/heavy hits</li>
                </ul>
              </li>
              <li><strong>Optional - Movement Integration:</strong>
                <ul>
                  <li>Your movement script should check <code>IsInHitstun</code></li>
                  <li>Disable player input while in hitstun</li>
                </ul>
              </li>
              <li><strong>Optional - Weight System:</strong>
                <ul>
                  <li>Set <code>weight</code> in Inspector (1 = normal, 2 = heavy, 0.5 = light)</li>
                  <li>Heavier entities receive less knockback</li>
                </ul>
              </li>
            </ol>

            <h3>The Script (2D)</h3>
            <details class="code-block">
              <summary>KnockbackReceiver2D.cs</summary>
            <pre><code>// ============================================================
// KnockbackReceiver2D.cs
// Attach to any entity that can be knocked back when hit.
// Includes hitstun (action disable) and weight system.
// Unity 6.x
// ============================================================

using UnityEngine;
using System;

[RequireComponent(typeof(Rigidbody2D))]
public class KnockbackReceiver2D : MonoBehaviour
{
    // ========================================================
    // KNOCKBACK PARAMETERS - Tune these in the Inspector
    // ========================================================

    [Header("Weight")]
    [Tooltip("How resistant to knockback (1 = normal, 2 = half knockback, 0.5 = double)")]
    [SerializeField] [Range(0.1f, 5f)] private float weight = 1f;

    [Header("Knockback Decay")]
    [Tooltip("How fast horizontal knockback velocity decays")]
    [SerializeField] [Range(0f, 20f)] private float horizontalDecay = 8f;

    [Tooltip("Should we apply decay or let physics handle it?")]
    [SerializeField] private bool useManualDecay = true;

    [Header("Preset Forces (for ApplyLightHit, etc.)")]
    [Tooltip("Light hit: horizontal force")]
    [SerializeField] private float lightForce = 4f;
    [Tooltip("Light hit: upward force")]
    [SerializeField] private float lightUpForce = 2f;
    [Tooltip("Light hit: hitstun duration")]
    [SerializeField] private float lightHitstun = 0.1f;

    [Tooltip("Medium hit: horizontal force")]
    [SerializeField] private float mediumForce = 8f;
    [Tooltip("Medium hit: upward force")]
    [SerializeField] private float mediumUpForce = 4f;
    [Tooltip("Medium hit: hitstun duration")]
    [SerializeField] private float mediumHitstun = 0.2f;

    [Tooltip("Heavy hit: horizontal force")]
    [SerializeField] private float heavyForce = 15f;
    [Tooltip("Heavy hit: upward force")]
    [SerializeField] private float heavyUpForce = 8f;
    [Tooltip("Heavy hit: hitstun duration")]
    [SerializeField] private float heavyHitstun = 0.4f;

    [Header("Debug")]
    [Tooltip("Show debug info in console")]
    [SerializeField] private bool debugMode = false;

    // ========================================================
    // INTERNAL STATE
    // ========================================================

    private Rigidbody2D rb;
    private float hitstunTimer = 0f;
    private bool inHitstun = false;
    private Vector2 knockbackVelocity = Vector2.zero;

    // ========================================================
    // EVENTS - Subscribe to react to knockback
    // ========================================================

    /// &lt;summary&gt;
    /// Fired when knockback starts (direction, force)
    /// &lt;/summary&gt;
    public event Action&lt;Vector2, float&gt; OnKnockbackStart;

    /// &lt;summary&gt;
    /// Fired when hitstun ends
    /// &lt;/summary&gt;
    public event Action OnHitstunEnd;

    // ========================================================
    // PUBLIC PROPERTIES
    // ========================================================

    /// &lt;summary&gt;
    /// True while in hitstun (cannot act)
    /// &lt;/summary&gt;
    public bool IsInHitstun =&gt; inHitstun;

    /// &lt;summary&gt;
    /// Remaining hitstun time
    /// &lt;/summary&gt;
    public float HitstunRemaining =&gt; hitstunTimer;

    /// &lt;summary&gt;
    /// This entity's weight (affects knockback received)
    /// &lt;/summary&gt;
    public float Weight =&gt; weight;

    // ========================================================
    // UNITY LIFECYCLE
    // ========================================================

    void Awake()
    {
        rb = GetComponent&lt;Rigidbody2D&gt;();
    }

    void Update()
    {
        // Process hitstun timer
        if (inHitstun)
        {
            hitstunTimer -= Time.deltaTime;

            if (hitstunTimer &lt;= 0f)
            {
                EndHitstun();
            }
        }
    }

    void FixedUpdate()
    {
        // Apply manual knockback decay
        if (useManualDecay &amp;&amp; inHitstun)
        {
            // Decay horizontal velocity toward zero
            float decayAmount = horizontalDecay * Time.fixedDeltaTime;
            float currentX = rb.linearVelocity.x;

            if (Mathf.Abs(currentX) &gt; decayAmount)
            {
                float newX = currentX - Mathf.Sign(currentX) * decayAmount;
                rb.linearVelocity = new Vector2(newX, rb.linearVelocity.y);
            }
            else
            {
                rb.linearVelocity = new Vector2(0f, rb.linearVelocity.y);
            }
        }
    }

    // ========================================================
    // PUBLIC METHODS - Call these to apply knockback
    // ========================================================

    /// &lt;summary&gt;
    /// Apply knockback with full control over parameters
    /// &lt;/summary&gt;
    /// &lt;param name="attackerPosition"&gt;Position of the attacker (knockback away from this)&lt;/param&gt;
    /// &lt;param name="horizontalForce"&gt;Force pushing away horizontally&lt;/param&gt;
    /// &lt;param name="upwardForce"&gt;Force pushing upward&lt;/param&gt;
    /// &lt;param name="hitstunDuration"&gt;How long target can't act&lt;/param&gt;
    public void ApplyKnockback(Vector2 attackerPosition, float horizontalForce,
                                float upwardForce, float hitstunDuration)
    {
        // Calculate direction FROM attacker TO this entity
        Vector2 direction = ((Vector2)transform.position - attackerPosition).normalized;

        // If directly above/below, default to facing away from attacker's right
        if (Mathf.Abs(direction.x) &lt; 0.1f)
        {
            direction.x = transform.position.x &gt; attackerPosition.x ? 1f : -1f;
        }

        // Apply weight modifier (heavier = less knockback)
        float weightModifier = 1f / weight;
        float finalHorizontal = horizontalForce * weightModifier;
        float finalUpward = upwardForce * weightModifier;

        // Build knockback velocity
        knockbackVelocity = new Vector2(
            Mathf.Sign(direction.x) * finalHorizontal,
            finalUpward
        );

        // Apply velocity directly
        rb.linearVelocity = knockbackVelocity;

        // Start hitstun
        inHitstun = true;
        hitstunTimer = hitstunDuration;

        // Fire event
        OnKnockbackStart?.Invoke(direction, horizontalForce);

        if (debugMode)
        {
            Debug.Log($"Knockback applied! Direction: {direction}, " +
                      $"Force: ({finalHorizontal}, {finalUpward}), " +
                      $"Hitstun: {hitstunDuration}s");
        }
    }

    /// &lt;summary&gt;
    /// Apply knockback in a specific direction (not away from attacker)
    /// &lt;/summary&gt;
    public void ApplyKnockbackDirection(Vector2 direction, float horizontalForce,
                                         float upwardForce, float hitstunDuration)
    {
        float weightModifier = 1f / weight;
        knockbackVelocity = new Vector2(
            direction.x * horizontalForce * weightModifier,
            upwardForce * weightModifier
        );

        rb.linearVelocity = knockbackVelocity;

        inHitstun = true;
        hitstunTimer = hitstunDuration;

        OnKnockbackStart?.Invoke(direction, horizontalForce);
    }

    /// &lt;summary&gt;
    /// Apply a light hit knockback
    /// &lt;/summary&gt;
    public void ApplyLightHit(Vector2 attackerPosition)
    {
        ApplyKnockback(attackerPosition, lightForce, lightUpForce, lightHitstun);
    }

    /// &lt;summary&gt;
    /// Apply a medium hit knockback
    /// &lt;/summary&gt;
    public void ApplyMediumHit(Vector2 attackerPosition)
    {
        ApplyKnockback(attackerPosition, mediumForce, mediumUpForce, mediumHitstun);
    }

    /// &lt;summary&gt;
    /// Apply a heavy hit knockback
    /// &lt;/summary&gt;
    public void ApplyHeavyHit(Vector2 attackerPosition)
    {
        ApplyKnockback(attackerPosition, heavyForce, heavyUpForce, heavyHitstun);
    }

    /// &lt;summary&gt;
    /// Immediately end hitstun (for special recovery moves)
    /// &lt;/summary&gt;
    public void CancelHitstun()
    {
        if (inHitstun)
        {
            EndHitstun();
        }
    }

    // ========================================================
    // INTERNAL METHODS
    // ========================================================

    /// &lt;summary&gt;
    /// End hitstun and restore control
    /// &lt;/summary&gt;
    private void EndHitstun()
    {
        inHitstun = false;
        hitstunTimer = 0f;

        OnHitstunEnd?.Invoke();

        if (debugMode)
        {
            Debug.Log("Hitstun ended - control restored");
        }
    }
}

// ============================================================
// USAGE EXAMPLES:
//
// 1. From an attack script when dealing damage:
//    void DealDamage(GameObject target, int damage)
//    {
//        var knockback = target.GetComponent&lt;KnockbackReceiver2D&gt;();
//        if (knockback != null)
//        {
//            knockback.ApplyMediumHit(transform.position);
//        }
//        // Also apply damage to health, play effects, etc.
//    }
//
// 2. Custom knockback for special attacks:
//    void SuperPunch(GameObject target)
//    {
//        var knockback = target.GetComponent&lt;KnockbackReceiver2D&gt;();
//        // Massive knockback with long hitstun
//        knockback.ApplyKnockback(transform.position, 20f, 12f, 0.6f);
//    }
//
// 3. In your movement script, disable input during hitstun:
//    void Update()
//    {
//        if (knockbackReceiver.IsInHitstun)
//        {
//            // Don't process movement input
//            return;
//        }
//        // Normal movement code...
//    }
//
// 4. Subscribe to knockback events:
//    void Start()
//    {
//        GetComponent&lt;KnockbackReceiver2D&gt;().OnKnockbackStart += OnHit;
//        GetComponent&lt;KnockbackReceiver2D&gt;().OnHitstunEnd += OnRecover;
//    }
//    void OnHit(Vector2 dir, float force) { PlayHitAnimation(); }
//    void OnRecover() { PlayRecoverAnimation(); }
//
// 5. Combine with HitstopManager for full impact:
//    void OnAttackHit(GameObject target)
//    {
//        HitstopManager.Instance.TriggerMediumHit();
//        target.GetComponent&lt;KnockbackReceiver2D&gt;().ApplyMediumHit(transform.position);
//        ScreenShake.Instance.TriggerShake(0.2f, 0.3f);
//    }
//
// 6. For 3D: Change Rigidbody2D to Rigidbody, Vector2 to Vector3
// ============================================================</code></pre>
            </details>

            <h3>Common Issues</h3>
            <p><strong>"Knockback goes the wrong direction"</strong><br>
            Make sure you're calculating direction FROM attacker TO target, not the reverse. Also check if target's facing direction affects the calculation.</p>

            <p><strong>"Target gets stuck in walls"</strong><br>
            Add collision checks or reduce knockback when near walls. Some videogames "slide" along walls; others cancel knockback.</p>

            <p><strong>"Combat feels floaty"</strong><br>
            <code>knockbackUp</code> might be too high relative to gravity. Also check <code>knockbackDecay</code> - slow decay = floaty.</p>

            <p><strong>"Player gets knocked into pits unfairly"</strong><br>
            Consider invincibility frames or reduced knockback near hazards. Or lean into it - environmental kills can be a feature, not a bug.</p>

            <h3>Combine With</h3>
            <ul>
              <li><a href="hitstop.html">Hitstop</a> - pause before knockback begins</li>
              <li><a href="screen-shake.html">Screen Shake</a> - emphasize the impact</li>
              <li><a href="squash-stretch.html">Squash & Stretch</a> - deform on impact</li>
              <li><a href="input-buffer.html">Input Buffer</a> - buffer recovery actions during hitstun</li>
            </ul>

            <h3>Knockback Variations</h3>
            <table>
              <thead>
                <tr>
                  <th>Type</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Fixed knockback</td>
                  <td>Same force regardless of damage dealt</td>
                </tr>
                <tr>
                  <td>Damage-scaled</td>
                  <td>More damage = more knockback (Smash Bros.)</td>
                </tr>
                <tr>
                  <td>Weight-modified</td>
                  <td>Heavier targets fly less far</td>
                </tr>
                <tr>
                  <td>Directional</td>
                  <td>Different attacks knock in different directions</td>
                </tr>
                <tr>
                  <td>Wall bounce</td>
                  <td>Hitting a wall bounces you back into play</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- CRAFT REGISTER -->
        <div class="register register--craft collapsed">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Craft <span class="register-label">- for educators</span>
          </div>
          <div class="register-content">
            <h3>Why Teach This</h3>
            <p>Knockback teaches <strong>combat as space control</strong>. It connects damage to positioning, making combat about territory, not just health bars. Students learn that good combat systems have physical consequences.</p>

            <h3>Teaching Sequence</h3>
            <ol>
              <li>Implement basic knockback (force away from attacker)</li>
              <li>Add hitstun to disable target temporarily</li>
              <li>Tune for different attack types</li>
              <li>Add environmental hazards to make knockback consequential</li>
            </ol>

            <h3>The Smash Bros. Lesson</h3>
            <p>Super Smash Bros. is the ultimate knockback-focused design. Damage increases knockback instead of reducing health. The only way to lose is to be knocked off the stage. This design makes positioning central to everything.</p>
            <p>Even if students aren't making platform fighters, they can learn from this: <strong>what if knockback was the primary threat?</strong></p>

            <h3>Assessment Questions</h3>
            <ul>
              <li>How does knockback change where combat happens in a level?</li>
              <li>Why pair hitstun with knockback? What goes wrong without it?</li>
              <li>How would you balance knockback near instant-death hazards?</li>
            </ul>
          </div>
        </div>

        <!-- THEORY REGISTER -->
        <div class="register register--theory collapsed">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Theory <span class="register-label">- deeper grounding</span>
          </div>
          <div class="register-content">
            <h3>Heritage Notes</h3>
            <p>Knockback existed in early videogames (Castlevania's infamous knockback into pits) but became a design focus with fighting games. Street Fighter II's corner pressure, where knockback traps opponents at screen edge, showed that positioning could be a resource.</p>
            <p>Platform fighters like Smash Bros. made knockback the entire victory condition, replacing health bars entirely.</p>

            <h3>Knockback as Permissions</h3>
            <p>From a <a href="../framework/permissions.html" class="term">Permissions</a> perspective, knockback temporarily revokes permission to act (hitstun) and forcibly repositions the target. It's one of the most aggressive permission changes in action videogames.</p>
            <p>This can feel fair (you got hit, you pay the price) or unfair (chain knockback that never lets you act). Tuning knockback is tuning fairness.</p>

            <h3>The Castlevania Problem</h3>
            <p>Classic Castlevania is notorious for knockback into pits - one hit sends you flying backwards into instant death. This was partly technical limitation, partly intentional difficulty.</p>
            <p>Modern videogames usually provide either:</p>
            <ul>
              <li>Invincibility frames to escape after one hit</li>
              <li>Reduced knockback near hazards</li>
              <li>Ledge grabbing or recovery mechanics</li>
            </ul>
            <p>The Castlevania approach is a <strong>heritage choice</strong>: using it quotes that tradition, with all its implications.</p>

            <h3>Knockback and Atmosphere</h3>
            <p>Knockback force communicates power. A weak slap might push you slightly; a massive hit launches you across the screen. The <a href="../framework/the-four-as.html" class="term">Atmosphere</a> of a weapon is partially defined by its knockback. A weighty hammer should send enemies flying; a quick dagger shouldn't.</p>
          </div>
        </div>

        <hr>

        <h2>Related</h2>
        <ul>
          <li><a href="hitstop.html">Hitstop</a> - pause before the knockback</li>
          <li><a href="screen-shake.html">Screen Shake</a> - visual impact feedback</li>
          <li><a href="../framework/permissions.html">Permissions</a> - knockback as permission revocation</li>
        </ul>

        <h2>Glossary Terms</h2>
        <ul>
          <li><a href="../glossary.html#hitstun" class="term">Hitstun</a></li>
          <li><a href="../glossary.html#invincibility-frames" class="term">Invincibility Frames</a></li>
        </ul>

      </div>
    </main>
  </div>

  <script src="../../js/main.js"></script>
</body>
</html>
