<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Variable Jump - VG101 Knowledge Base</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/style.css">
  <style>
    .register{margin:2rem 0;border-radius:8px;overflow:hidden}
    .register-header{padding:1rem 1.5rem;font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.05em;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
    .register-header::after{content:'â–¼';font-size:.75rem;transition:transform .2s}
    .register.collapsed .register-header::after{transform:rotate(-90deg)}
    .register-content{padding:1.5rem;border-top:1px solid rgba(0,0,0,0.1)}
    .register.collapsed .register-content{display:none}
    .register--practice{background:#f0fdfa;border:2px solid #14b8a6}
    .register--practice .register-header{background:#14b8a6;color:#fff}
    .register--practice .register-content{border-color:#99f6e4}
    .register--craft{background:#eff6ff;border:2px solid #3b82f6}
    .register--craft .register-header{background:#3b82f6;color:#fff}
    .register--craft .register-content{border-color:#bfdbfe}
    .register--theory{background:#faf5ff;border:2px solid #a855f7}
    .register--theory .register-header{background:#a855f7;color:#fff}
    .register--theory .register-content{border-color:#e9d5ff}
    .register-content h3{margin-top:0}
    .register-content h3:not(:first-child){margin-top:1.5rem}
    .register-label{font-size:.75rem;opacity:.8;font-weight:400;text-transform:none;letter-spacing:normal}
    .term{color:#f59e0b;text-decoration:underline;text-decoration-style:dotted;text-underline-offset:2px}
    .term:hover{color:#d97706}
    /* Perspective Tabs */
    .perspective-tabs{margin:1.5rem 0}
    .perspective-tabs input[type="radio"]{display:none}
    .tab-labels{display:flex;gap:0;border-bottom:2px solid #e5e7eb;margin-bottom:0}
    .tab-labels label{padding:0.75rem 1.25rem;cursor:pointer;font-weight:500;font-size:0.875rem;color:#64748b;border-bottom:2px solid transparent;margin-bottom:-2px;transition:all 0.2s}
    .tab-labels label:hover{color:#334155;background:#f8fafc}
    .tab-content{display:none;padding:1.5rem;background:#f8fafc;border:1px solid #e5e7eb;border-top:none;border-radius:0 0 8px 8px}
    #tab-2d:checked ~ .tab-labels label[for="tab-2d"],
    #tab-3d-tp:checked ~ .tab-labels label[for="tab-3d-tp"],
    #tab-3d-fp:checked ~ .tab-labels label[for="tab-3d-fp"],
    #tab-iso:checked ~ .tab-labels label[for="tab-iso"]{color:#14b8a6;border-bottom-color:#14b8a6;background:#f0fdfa}
    #tab-2d:checked ~ .content-2d,
    #tab-3d-tp:checked ~ .content-3d-tp,
    #tab-3d-fp:checked ~ .content-3d-fp,
    #tab-iso:checked ~ .content-iso{display:block}
    .prereq-note{background:#fef3c7;border:1px solid #f59e0b;border-radius:6px;padding:1rem;margin-bottom:1.5rem;font-size:0.9rem}
    .prereq-note a{color:#d97706;font-weight:500}
    pre{background:#1e293b;color:#e2e8f0;padding:1rem;border-radius:6px;overflow-x:auto;font-size:0.8rem;line-height:1.5}
    code{font-family:'JetBrains Mono',monospace}
    pre code{color:#e2e8f0}
    :not(pre)>code{background:#e2e8f0;padding:0.125rem 0.375rem;border-radius:3px;font-size:0.85em;color:#334155}
  </style>
</head>
<body>
  <!-- Mobile Navigation -->
  <button class="mobile-nav-toggle" aria-label="Open navigation menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
  <div class="mobile-nav-overlay"></div>

  <div class="site-container">
    <nav class="sidebar">
      <a href="../../../index.html" class="site-title">&larr; marty64.net</a>
      <p class="site-subtitle">VG101 Knowledge Base</p>

      <a href="../../index.html" class="nav-home">&larr; VG101 Home</a>

      <div class="nav-section">
        <div class="nav-section-title">Core Framework</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../framework/gesture.html" class="nav-link">Gesture</a></li>
          <li class="nav-item"><a href="../framework/the-four-as.html" class="nav-link">The 4 A's</a></li>
          <li class="nav-item"><a href="../framework/aesthetic-heritage.html" class="nav-link">Aesthetic Heritage</a></li>
          <li class="nav-item"><a href="../framework/permissions.html" class="nav-link">Permissions</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Foundations</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../foundations/what-makes-a-videogame.html" class="nav-link">What Makes a Videogame</a></li>
          <li class="nav-item"><a href="../foundations/the-weekly-rhythm.html" class="nav-link">The Weekly Rhythm</a></li>
          <li class="nav-item"><a href="../foundations/player-psychology.html" class="nav-link">Player Psychology</a></li>
          <li class="nav-item"><a href="../foundations/the-design-lens.html" class="nav-link">The Design Lens</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Narrative</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../narrative/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../narrative/environmental-storytelling.html" class="nav-link">Environmental Storytelling</a></li>
          <li class="nav-item"><a href="../narrative/branching-consequence.html" class="nav-link">Branching &amp; Consequence</a></li>
          <li class="nav-item"><a href="../narrative/dialogue-systems.html" class="nav-link">Dialogue Systems</a></li>
          <li class="nav-item"><a href="../narrative/ludonarrative-harmony.html" class="nav-link">Ludonarrative Harmony</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Level Design</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../level-design/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../level-design/spatial-communication.html" class="nav-link">Spatial Communication</a></li>
          <li class="nav-item"><a href="../level-design/pacing-flow.html" class="nav-link">Pacing &amp; Flow</a></li>
          <li class="nav-item"><a href="../level-design/guidance-without-handholding.html" class="nav-link">Guidance Without Hand-Holding</a></li>
          <li class="nav-item"><a href="../level-design/verticality-sightlines.html" class="nav-link">Verticality &amp; Sight Lines</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Systems</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../systems/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../systems/economy-resources.html" class="nav-link">Economy &amp; Resources</a></li>
          <li class="nav-item"><a href="../systems/progression-systems.html" class="nav-link">Progression Systems</a></li>
          <li class="nav-item"><a href="../systems/balance-philosophy.html" class="nav-link">Balance Philosophy</a></li>
          <li class="nav-item"><a href="../systems/emergent-behavior.html" class="nav-link">Emergent Behavior</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Pedagogy</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../pedagogy/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../pedagogy/play-name-make-reflect.html" class="nav-link">Play, Name, Make, Reflect</a></li>
          <li class="nav-item"><a href="../pedagogy/why-unity.html" class="nav-link">Why Unity</a></li>
          <li class="nav-item"><a href="../pedagogy/the-final-project.html" class="nav-link">The Final Project</a></li>
          <li class="nav-item"><a href="../pedagogy/debugging-as-literacy.html" class="nav-link">Debugging as Literacy</a></li>
          <li class="nav-item"><a href="../pedagogy/accessibility-as-craft.html" class="nav-link">Accessibility as Craft</a></li>
          <li class="nav-item"><a href="../pedagogy/code-as-material.html" class="nav-link">Code as Material</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Code Bank</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="input-setup.html" class="nav-link">Input Setup</a></li>
          <li class="nav-item"><a href="basic-jump.html" class="nav-link">Basic Jump</a></li>
          <li class="nav-item"><a href="variable-jump.html" class="nav-link active">Variable Jump</a></li>
          <li class="nav-item"><a href="double-jump.html" class="nav-link">Double Jump</a></li>
          <li class="nav-item"><a href="coyote-time.html" class="nav-link">Coyote Time</a></li>
          <li class="nav-item"><a href="input-buffer.html" class="nav-link">Input Buffer</a></li>
          <li class="nav-item"><a href="dash.html" class="nav-link">Dash</a></li>
          <li class="nav-item"><a href="hitstop.html" class="nav-link">Hitstop</a></li>
          <li class="nav-item"><a href="knockback.html" class="nav-link">Knockback</a></li>
          <li class="nav-item"><a href="squash-stretch.html" class="nav-link">Squash &amp; Stretch</a></li>
          <li class="nav-item"><a href="screen-shake.html" class="nav-link">Screen Shake</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Case Studies</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../case-studies/index.html" class="nav-link">Overview</a></li>
          <li class="nav-item"><a href="../case-studies/celeste-dash.html" class="nav-link">Celeste: Dash</a></li>
          <li class="nav-item"><a href="../case-studies/celeste-assist-mode.html" class="nav-link">Celeste: Assist Mode</a></li>
          <li class="nav-item"><a href="../case-studies/dark-souls-bonfire.html" class="nav-link">Dark Souls: Bonfire</a></li>
          <li class="nav-item"><a href="../case-studies/hades-god-mode.html" class="nav-link">Hades: God Mode</a></li>
          <li class="nav-item"><a href="../case-studies/portal-level-one.html" class="nav-link">Portal: Level One</a></li>
          <li class="nav-item"><a href="../case-studies/undertale-genocide.html" class="nav-link">Undertale: Genocide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Resources</div>
        <ul class="nav-list">
          <li class="nav-item"><a href="../glossary.html" class="nav-link">Glossary</a></li>
          <li class="nav-item"><a href="../references.html" class="nav-link">References</a></li>
        </ul>
      </div>
    </nav>

    <main class="main-content">
      <div class="content-wrapper">
        <nav class="breadcrumb">
          <a href="../../index.html">VG101</a> / <a href="index.html">Code Bank</a> / Variable Jump
        </nav>

        <h1>Variable Jump</h1>

        <p class="lead">
          A jump where <strong>height depends on how long you hold the button.</strong> Tap for a short hop, hold for a full jump. This is the standard for modern platformers - it gives players expressive control over their arc.
        </p>

        <!-- PRACTICE REGISTER -->
        <div class="register register--practice">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Practice <span class="register-label">- what you do</span>
          </div>
          <div class="register-content">
            <h3>The Feel</h3>
            <p>Variable jump creates a sense of <strong>responsive precision.</strong> The player feels like the character is listening to their intention, not just executing a canned animation.</p>
            <p>Compare:</p>
            <ul>
              <li><strong>Fixed jump:</strong> "I pressed jump and it happened"</li>
              <li><strong>Variable jump:</strong> "I <em>shaped</em> that jump"</li>
            </ul>
            <p>The difference is ownership.</p>

            <h3>Exposed Variables</h3>
            <table>
              <thead>
                <tr>
                  <th>Variable</th>
                  <th>Type</th>
                  <th>Default</th>
                  <th>What it does</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>minJumpForce</code></td>
                  <td>float</td>
                  <td>8.0</td>
                  <td>Jump height if you tap (minimum)</td>
                </tr>
                <tr>
                  <td><code>maxJumpForce</code></td>
                  <td>float</td>
                  <td>16.0</td>
                  <td>Jump height if you hold (maximum)</td>
                </tr>
                <tr>
                  <td><code>jumpCutMultiplier</code></td>
                  <td>float</td>
                  <td>0.5</td>
                  <td>Velocity multiplier when releasing early</td>
                </tr>
                <tr>
                  <td><code>gravity</code></td>
                  <td>float</td>
                  <td>40.0</td>
                  <td>Downward acceleration</td>
                </tr>
                <tr>
                  <td><code>fallGravityMultiplier</code></td>
                  <td>float</td>
                  <td>1.5</td>
                  <td>Extra gravity when falling</td>
                </tr>
              </tbody>
            </table>

            <h3>Tuning Guide</h3>

            <p><strong>For a floaty, forgiving feel:</strong></p>
            <ul>
              <li>Lower <code>gravity</code> (25-30)</li>
              <li>Lower <code>fallGravityMultiplier</code> (1.0-1.2)</li>
              <li>Higher <code>jumpCutMultiplier</code> (0.7-0.8)</li>
            </ul>
            <p><em>Reference: Kirby, Little Big Planet</em></p>

            <p><strong>For a tight, precise feel:</strong></p>
            <ul>
              <li>Higher <code>gravity</code> (45-60)</li>
              <li>Higher <code>fallGravityMultiplier</code> (1.8-2.5)</li>
              <li>Lower <code>jumpCutMultiplier</code> (0.3-0.5)</li>
            </ul>
            <p><em>Reference: Celeste, Super Meat Boy</em></p>

            <h3>Perspective Scripts</h3>

            <div class="prereq-note">
              <strong>Prerequisite:</strong> All scripts below require the <a href="input-setup.html">InputReader</a> to be set up in your scene. Complete the Input Setup first.
            </div>

            <div class="perspective-tabs">
              <input type="radio" name="perspective" id="tab-2d" checked>
              <input type="radio" name="perspective" id="tab-3d-tp">
              <input type="radio" name="perspective" id="tab-3d-fp">
              <input type="radio" name="perspective" id="tab-iso">

              <div class="tab-labels">
                <label for="tab-2d">2D Platformer</label>
                <label for="tab-3d-tp">3D Third-Person</label>
                <label for="tab-3d-fp">3D First-Person</label>
                <label for="tab-iso">Isometric</label>
              </div>

              <!-- 2D PLATFORMER -->
              <div class="tab-content content-2d">
                <h4>VariableJump2D.cs</h4>
                <p>Classic 2D variable jump. Hold to go higher, release early to cut the jump short.</p>

                <p><strong>Setup:</strong></p>
                <ol>
                  <li>Add <code>Rigidbody2D</code> to your player (Freeze Rotation Z)</li>
                  <li>Add a <code>Collider2D</code></li>
                  <li>Create an empty child GameObject at the feet, name it "GroundCheck"</li>
                  <li>Add this script and configure in Inspector</li>
                </ol>

                <details class="code-block">
                  <summary>VariableJump2D.cs</summary>
                <pre><code>using UnityEngine;

/// &lt;summary&gt;
/// VARIABLE JUMP 2D - Height depends on hold duration
/// VG101 Code Bank - Requires InputReader from Input Setup
/// &lt;/summary&gt;
[RequireComponent(typeof(Rigidbody2D))]
public class VariableJump2D : MonoBehaviour
{
    [Header("Jump Feel")]
    [Tooltip("Jump force if you tap (minimum height)")]
    [Range(5f, 15f)]
    [SerializeField] private float minJumpForce = 8f;

    [Tooltip("Jump force if you hold (maximum height)")]
    [Range(10f, 25f)]
    [SerializeField] private float maxJumpForce = 16f;

    [Tooltip("Velocity multiplier when releasing early")]
    [Range(0.1f, 1f)]
    [SerializeField] private float jumpCutMultiplier = 0.5f;

    [Tooltip("Gravity while rising and falling")]
    [Range(20f, 80f)]
    [SerializeField] private float gravity = 40f;

    [Tooltip("Extra gravity when falling")]
    [Range(1f, 4f)]
    [SerializeField] private float fallGravityMultiplier = 1.5f;

    [Header("Ground Detection")]
    [SerializeField] private Transform groundCheckPoint;
    [Range(0.05f, 0.5f)]
    [SerializeField] private float groundCheckRadius = 0.2f;
    [SerializeField] private LayerMask groundLayer;

    [Header("Debug")]
    [SerializeField] private bool showGroundCheck = true;

    private Rigidbody2D rb;
    private float verticalVelocity;
    private bool isGrounded;
    private bool isJumping;
    private bool jumpHeld;

    private void Awake()
    {
        rb = GetComponent&lt;Rigidbody2D&gt;();
        rb.gravityScale = 0f;
    }

    private void OnEnable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed += HandleJumpPressed;
            InputReader.Instance.OnJumpReleased += HandleJumpReleased;
        }
    }

    private void OnDisable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed -= HandleJumpPressed;
            InputReader.Instance.OnJumpReleased -= HandleJumpReleased;
        }
    }

    private void FixedUpdate()
    {
        CheckGrounded();
        HandleJumpHold();
        ApplyGravity();
        ApplyVelocity();
    }

    private void CheckGrounded()
    {
        isGrounded = Physics2D.OverlapCircle(
            groundCheckPoint.position,
            groundCheckRadius,
            groundLayer
        );

        if (isGrounded && verticalVelocity &lt; 0)
        {
            verticalVelocity = 0f;
            isJumping = false;
        }
    }

    private void HandleJumpPressed()
    {
        if (isGrounded)
        {
            verticalVelocity = minJumpForce;
            isJumping = true;
            jumpHeld = true;
        }
    }

    private void HandleJumpReleased()
    {
        jumpHeld = false;

        // Cut the jump if still rising
        if (isJumping && verticalVelocity &gt; 0)
        {
            verticalVelocity *= jumpCutMultiplier;
        }
    }

    private void HandleJumpHold()
    {
        // While holding and rising, boost toward max
        if (isJumping && jumpHeld && verticalVelocity &gt; 0)
        {
            // Smoothly increase force while holding
            verticalVelocity = Mathf.MoveTowards(
                verticalVelocity,
                maxJumpForce,
                (maxJumpForce - minJumpForce) * Time.fixedDeltaTime * 10f
            );
        }
    }

    private void ApplyGravity()
    {
        if (!isGrounded)
        {
            float gravityThisFrame = gravity;
            if (verticalVelocity &lt; 0)
            {
                gravityThisFrame *= fallGravityMultiplier;
            }
            verticalVelocity -= gravityThisFrame * Time.fixedDeltaTime;
        }
    }

    private void ApplyVelocity()
    {
        Vector2 velocity = rb.linearVelocity;
        velocity.y = verticalVelocity;
        rb.linearVelocity = velocity;
    }

    private void OnDrawGizmos()
    {
        if (showGroundCheck && groundCheckPoint != null)
        {
            Gizmos.color = isGrounded ? Color.green : Color.red;
            Gizmos.DrawWireSphere(groundCheckPoint.position, groundCheckRadius);
        }
    }
}</code></pre>
                </details>
              </div>

              <!-- 3D THIRD-PERSON -->
              <div class="tab-content content-3d-tp">
                <h4>VariableJump3D.cs</h4>
                <p>Third-person variable jump with camera-relative movement. Hold for higher jumps.</p>

                <p><strong>Setup:</strong></p>
                <ol>
                  <li>Add <code>CharacterController</code> to your player</li>
                  <li>Add this script and configure in Inspector</li>
                  <li>Set Ground Layer to your environment's layer</li>
                </ol>

                <details class="code-block">
                  <summary>VariableJump3D.cs</summary>
                <pre><code>using UnityEngine;

/// &lt;summary&gt;
/// VARIABLE JUMP 3D - Height depends on hold duration
/// VG101 Code Bank - Requires InputReader from Input Setup
/// &lt;/summary&gt;
[RequireComponent(typeof(CharacterController))]
public class VariableJump3D : MonoBehaviour
{
    [Header("Jump Feel")]
    [Range(5f, 15f)]
    [SerializeField] private float minJumpForce = 6f;

    [Range(10f, 25f)]
    [SerializeField] private float maxJumpForce = 12f;

    [Range(0.1f, 1f)]
    [SerializeField] private float jumpCutMultiplier = 0.5f;

    [Range(20f, 80f)]
    [SerializeField] private float gravity = 30f;

    [Range(1f, 4f)]
    [SerializeField] private float fallGravityMultiplier = 2f;

    [Header("Ground Detection")]
    [SerializeField] private Vector3 groundCheckOffset = new Vector3(0, -0.9f, 0);
    [SerializeField] private float groundCheckRadius = 0.3f;
    [SerializeField] private LayerMask groundLayer;

    [Header("Movement")]
    [SerializeField] private float moveSpeed = 8f;
    [Range(0f, 1f)]
    [SerializeField] private float airControl = 0.5f;

    [Header("Debug")]
    [SerializeField] private bool showGroundCheck = true;

    private CharacterController controller;
    private Vector3 velocity;
    private bool isGrounded;
    private bool isJumping;
    private bool jumpHeld;
    private Transform cameraTransform;

    private void Awake()
    {
        controller = GetComponent&lt;CharacterController&gt;();
        cameraTransform = Camera.main?.transform;
    }

    private void OnEnable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed += HandleJumpPressed;
            InputReader.Instance.OnJumpReleased += HandleJumpReleased;
        }
    }

    private void OnDisable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed -= HandleJumpPressed;
            InputReader.Instance.OnJumpReleased -= HandleJumpReleased;
        }
    }

    private void Update()
    {
        CheckGrounded();
        HandleMovement();
        HandleJumpHold();
        ApplyGravity();
        ApplyVelocity();
    }

    private void CheckGrounded()
    {
        Vector3 checkPosition = transform.position + groundCheckOffset;
        isGrounded = Physics.CheckSphere(checkPosition, groundCheckRadius, groundLayer);

        if (isGrounded && velocity.y &lt; 0)
        {
            velocity.y = -2f;
            isJumping = false;
        }
    }

    private void HandleMovement()
    {
        Vector2 input = InputReader.Instance != null ? InputReader.Instance.MoveInput : Vector2.zero;

        Vector3 forward = cameraTransform != null ? cameraTransform.forward : transform.forward;
        Vector3 right = cameraTransform != null ? cameraTransform.right : transform.right;
        forward.y = 0f;
        right.y = 0f;
        forward.Normalize();
        right.Normalize();

        Vector3 moveDirection = (forward * input.y + right * input.x);

        float currentSpeed = isGrounded ? moveSpeed : moveSpeed * airControl;
        velocity.x = moveDirection.x * currentSpeed;
        velocity.z = moveDirection.z * currentSpeed;

        if (moveDirection.magnitude &gt; 0.1f)
        {
            Quaternion targetRotation = Quaternion.LookRotation(moveDirection);
            transform.rotation = Quaternion.Slerp(transform.rotation, targetRotation, 10f * Time.deltaTime);
        }
    }

    private void HandleJumpPressed()
    {
        if (isGrounded)
        {
            velocity.y = minJumpForce;
            isJumping = true;
            jumpHeld = true;
        }
    }

    private void HandleJumpReleased()
    {
        jumpHeld = false;

        if (isJumping && velocity.y &gt; 0)
        {
            velocity.y *= jumpCutMultiplier;
        }
    }

    private void HandleJumpHold()
    {
        if (isJumping && jumpHeld && velocity.y &gt; 0)
        {
            velocity.y = Mathf.MoveTowards(
                velocity.y,
                maxJumpForce,
                (maxJumpForce - minJumpForce) * Time.deltaTime * 10f
            );
        }
    }

    private void ApplyGravity()
    {
        if (!isGrounded)
        {
            float gravityThisFrame = gravity;
            if (velocity.y &lt; 0)
            {
                gravityThisFrame *= fallGravityMultiplier;
            }
            velocity.y -= gravityThisFrame * Time.deltaTime;
        }
    }

    private void ApplyVelocity()
    {
        controller.Move(velocity * Time.deltaTime);
    }

    private void OnDrawGizmos()
    {
        if (showGroundCheck)
        {
            Vector3 checkPosition = transform.position + groundCheckOffset;
            Gizmos.color = isGrounded ? Color.green : Color.red;
            Gizmos.DrawWireSphere(checkPosition, groundCheckRadius);
        }
    }
}</code></pre>
                </details>
              </div>

              <!-- 3D FIRST-PERSON -->
              <div class="tab-content content-3d-fp">
                <h4>VariableJumpFPS.cs</h4>
                <p>First-person variable jump. Less common in FPS but useful for platforming-focused games like Titanfall.</p>

                <p><strong>Setup:</strong></p>
                <ol>
                  <li>Add <code>CharacterController</code> to your player</li>
                  <li>Create a child Camera</li>
                  <li>Add this script and assign the Camera reference</li>
                </ol>

                <details class="code-block">
                  <summary>VariableJumpFPS.cs</summary>
                <pre><code>using UnityEngine;

/// &lt;summary&gt;
/// VARIABLE JUMP FPS - First-person variable jump
/// VG101 Code Bank - Requires InputReader from Input Setup
/// &lt;/summary&gt;
[RequireComponent(typeof(CharacterController))]
public class VariableJumpFPS : MonoBehaviour
{
    [Header("Jump Feel")]
    [Range(5f, 15f)]
    [SerializeField] private float minJumpForce = 6f;

    [Range(10f, 25f)]
    [SerializeField] private float maxJumpForce = 10f;

    [Range(0.1f, 1f)]
    [SerializeField] private float jumpCutMultiplier = 0.5f;

    [Range(20f, 80f)]
    [SerializeField] private float gravity = 25f;

    [Range(1f, 4f)]
    [SerializeField] private float fallGravityMultiplier = 2f;

    [Header("Ground Detection")]
    [SerializeField] private Vector3 groundCheckOffset = new Vector3(0, -0.9f, 0);
    [SerializeField] private float groundCheckRadius = 0.3f;
    [SerializeField] private LayerMask groundLayer;

    [Header("Movement")]
    [SerializeField] private float moveSpeed = 6f;
    [Range(0f, 1f)]
    [SerializeField] private float airControl = 0.3f;

    [Header("Mouse Look")]
    [SerializeField] private Transform playerCamera;
    [SerializeField] private float gamepadLookSpeed = 150f;
    [SerializeField] private float mouseSensitivity = 0.15f;
    [Range(45f, 90f)]
    [SerializeField] private float maxLookAngle = 85f;

    [Header("Debug")]
    [SerializeField] private bool showGroundCheck = true;

    private CharacterController controller;
    private Vector3 velocity;
    private bool isGrounded;
    private bool isJumping;
    private bool jumpHeld;
    private float cameraPitch;

    private void Awake()
    {
        controller = GetComponent&lt;CharacterController&gt;();
        Cursor.lockState = CursorLockMode.Locked;
        Cursor.visible = false;
    }

    private void OnEnable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed += HandleJumpPressed;
            InputReader.Instance.OnJumpReleased += HandleJumpReleased;
        }
    }

    private void OnDisable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed -= HandleJumpPressed;
            InputReader.Instance.OnJumpReleased -= HandleJumpReleased;
        }
    }

    private void Update()
    {
        CheckGrounded();
        HandleLook();
        HandleMovement();
        HandleJumpHold();
        ApplyGravity();
        ApplyVelocity();
    }

    private void CheckGrounded()
    {
        Vector3 checkPosition = transform.position + groundCheckOffset;
        isGrounded = Physics.CheckSphere(checkPosition, groundCheckRadius, groundLayer);

        if (isGrounded && velocity.y &lt; 0)
        {
            velocity.y = -2f;
            isJumping = false;
        }
    }

    private void HandleLook()
    {
        if (InputReader.Instance == null) return;

        Vector2 lookInput = InputReader.Instance.LookInput;

        float lookSpeedX, lookSpeedY;
        if (InputReader.Instance.IsUsingGamepad)
        {
            lookSpeedX = gamepadLookSpeed * Time.deltaTime;
            lookSpeedY = gamepadLookSpeed * Time.deltaTime;
        }
        else
        {
            lookSpeedX = mouseSensitivity;
            lookSpeedY = mouseSensitivity;
        }

        transform.Rotate(Vector3.up * lookInput.x * lookSpeedX);

        cameraPitch -= lookInput.y * lookSpeedY;
        cameraPitch = Mathf.Clamp(cameraPitch, -maxLookAngle, maxLookAngle);

        if (playerCamera != null)
        {
            playerCamera.localRotation = Quaternion.Euler(cameraPitch, 0f, 0f);
        }
    }

    private void HandleMovement()
    {
        Vector2 input = InputReader.Instance != null ? InputReader.Instance.MoveInput : Vector2.zero;
        Vector3 moveDirection = transform.forward * input.y + transform.right * input.x;

        float currentSpeed = isGrounded ? moveSpeed : moveSpeed * airControl;
        velocity.x = moveDirection.x * currentSpeed;
        velocity.z = moveDirection.z * currentSpeed;
    }

    private void HandleJumpPressed()
    {
        if (isGrounded)
        {
            velocity.y = minJumpForce;
            isJumping = true;
            jumpHeld = true;
        }
    }

    private void HandleJumpReleased()
    {
        jumpHeld = false;

        if (isJumping && velocity.y &gt; 0)
        {
            velocity.y *= jumpCutMultiplier;
        }
    }

    private void HandleJumpHold()
    {
        if (isJumping && jumpHeld && velocity.y &gt; 0)
        {
            velocity.y = Mathf.MoveTowards(
                velocity.y,
                maxJumpForce,
                (maxJumpForce - minJumpForce) * Time.deltaTime * 10f
            );
        }
    }

    private void ApplyGravity()
    {
        if (!isGrounded)
        {
            float gravityThisFrame = gravity;
            if (velocity.y &lt; 0)
            {
                gravityThisFrame *= fallGravityMultiplier;
            }
            velocity.y -= gravityThisFrame * Time.deltaTime;
        }
    }

    private void ApplyVelocity()
    {
        controller.Move(velocity * Time.deltaTime);
    }

    private void OnDrawGizmos()
    {
        if (showGroundCheck)
        {
            Vector3 checkPosition = transform.position + groundCheckOffset;
            Gizmos.color = isGrounded ? Color.green : Color.red;
            Gizmos.DrawWireSphere(checkPosition, groundCheckRadius);
        }
    }
}</code></pre>
                </details>
              </div>

              <!-- ISOMETRIC -->
              <div class="tab-content content-iso">
                <h4>VariableJumpIsometric.cs</h4>
                <p>Isometric variable jump. Useful for action games like Hades where vertical movement adds depth.</p>

                <p><strong>Setup:</strong></p>
                <ol>
                  <li>Add <code>CharacterController</code> to your player</li>
                  <li>Set up isometric camera</li>
                  <li>Add this script and configure movement mode</li>
                </ol>

                <details class="code-block">
                  <summary>VariableJumpIsometric.cs</summary>
                <pre><code>using UnityEngine;

/// &lt;summary&gt;
/// VARIABLE JUMP ISOMETRIC - Isometric variable jump
/// VG101 Code Bank - Requires InputReader from Input Setup
/// &lt;/summary&gt;
[RequireComponent(typeof(CharacterController))]
public class VariableJumpIsometric : MonoBehaviour
{
    public enum MovementMode { WorldAxis, Isometric45 }

    [Header("Jump Feel")]
    [Range(5f, 15f)]
    [SerializeField] private float minJumpForce = 8f;

    [Range(10f, 25f)]
    [SerializeField] private float maxJumpForce = 14f;

    [Range(0.1f, 1f)]
    [SerializeField] private float jumpCutMultiplier = 0.5f;

    [Range(20f, 80f)]
    [SerializeField] private float gravity = 35f;

    [Range(1f, 4f)]
    [SerializeField] private float fallGravityMultiplier = 1.5f;

    [Header("Ground Detection")]
    [SerializeField] private Vector3 groundCheckOffset = new Vector3(0, -0.5f, 0);
    [SerializeField] private float groundCheckRadius = 0.3f;
    [SerializeField] private LayerMask groundLayer;

    [Header("Movement")]
    [SerializeField] private MovementMode movementMode = MovementMode.Isometric45;
    [SerializeField] private float moveSpeed = 7f;
    [Range(0f, 1f)]
    [SerializeField] private float airControl = 0.5f;
    [SerializeField] private bool rotateToMovement = true;
    [SerializeField] private float rotationSpeed = 720f;

    [Header("Debug")]
    [SerializeField] private bool showGroundCheck = true;

    private CharacterController controller;
    private Vector3 velocity;
    private bool isGrounded;
    private bool isJumping;
    private bool jumpHeld;

    private static readonly Matrix4x4 isoMatrix = Matrix4x4.Rotate(Quaternion.Euler(0, 45, 0));

    private void Awake()
    {
        controller = GetComponent&lt;CharacterController&gt;();
    }

    private void OnEnable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed += HandleJumpPressed;
            InputReader.Instance.OnJumpReleased += HandleJumpReleased;
        }
    }

    private void OnDisable()
    {
        if (InputReader.Instance != null)
        {
            InputReader.Instance.OnJumpPressed -= HandleJumpPressed;
            InputReader.Instance.OnJumpReleased -= HandleJumpReleased;
        }
    }

    private void Update()
    {
        CheckGrounded();
        HandleMovement();
        HandleJumpHold();
        ApplyGravity();
        ApplyVelocity();
    }

    private void CheckGrounded()
    {
        Vector3 checkPosition = transform.position + groundCheckOffset;
        isGrounded = Physics.CheckSphere(checkPosition, groundCheckRadius, groundLayer);

        if (isGrounded && velocity.y &lt; 0)
        {
            velocity.y = -2f;
            isJumping = false;
        }
    }

    private void HandleMovement()
    {
        Vector2 input = InputReader.Instance != null ? InputReader.Instance.MoveInput : Vector2.zero;

        Vector3 inputDirection = new Vector3(input.x, 0, input.y);
        Vector3 moveDirection = movementMode == MovementMode.Isometric45
            ? isoMatrix.MultiplyVector(inputDirection)
            : inputDirection;

        float currentSpeed = isGrounded ? moveSpeed : moveSpeed * airControl;
        velocity.x = moveDirection.x * currentSpeed;
        velocity.z = moveDirection.z * currentSpeed;

        if (rotateToMovement && moveDirection.magnitude &gt; 0.1f)
        {
            Quaternion targetRotation = Quaternion.LookRotation(moveDirection);
            transform.rotation = Quaternion.RotateTowards(
                transform.rotation,
                targetRotation,
                rotationSpeed * Time.deltaTime
            );
        }
    }

    private void HandleJumpPressed()
    {
        if (isGrounded)
        {
            velocity.y = minJumpForce;
            isJumping = true;
            jumpHeld = true;
        }
    }

    private void HandleJumpReleased()
    {
        jumpHeld = false;

        if (isJumping && velocity.y &gt; 0)
        {
            velocity.y *= jumpCutMultiplier;
        }
    }

    private void HandleJumpHold()
    {
        if (isJumping && jumpHeld && velocity.y &gt; 0)
        {
            velocity.y = Mathf.MoveTowards(
                velocity.y,
                maxJumpForce,
                (maxJumpForce - minJumpForce) * Time.deltaTime * 10f
            );
        }
    }

    private void ApplyGravity()
    {
        if (!isGrounded)
        {
            float gravityThisFrame = gravity;
            if (velocity.y &lt; 0)
            {
                gravityThisFrame *= fallGravityMultiplier;
            }
            velocity.y -= gravityThisFrame * Time.deltaTime;
        }
    }

    private void ApplyVelocity()
    {
        controller.Move(velocity * Time.deltaTime);
    }

    private void OnDrawGizmos()
    {
        if (showGroundCheck)
        {
            Vector3 checkPosition = transform.position + groundCheckOffset;
            Gizmos.color = isGrounded ? Color.green : Color.red;
            Gizmos.DrawWireSphere(checkPosition, groundCheckRadius);
        }
    }
}</code></pre>
                </details>
              </div>
            </div>

            <h3>Key Differences from Basic Jump</h3>
            <ul>
              <li><strong>Two force values:</strong> minJumpForce and maxJumpForce define the range</li>
              <li><strong>Hold tracking:</strong> We track whether the button is held</li>
              <li><strong>Jump cut:</strong> Releasing early multiplies velocity by jumpCutMultiplier</li>
              <li><strong>Real-time shaping:</strong> The arc is determined during the jump, not at the start</li>
            </ul>

            <h3>Common Issues</h3>
            <p><strong>"The jump feels mushy"</strong><br>
            Increase <code>fallGravityMultiplier</code>. The descent should be snappier than the ascent.</p>

            <p><strong>"I can't do small hops"</strong><br>
            Lower <code>minJumpForce</code> or decrease <code>jumpCutMultiplier</code>.</p>

            <p><strong>"InputReader.Instance is null"</strong><br>
            Make sure you have the InputReader in your scene. See <a href="input-setup.html">Input Setup</a>.</p>

            <h3>Combine With</h3>
            <ul>
              <li><a href="coyote-time.html">Coyote Time</a> - grace period makes variable jump more forgiving</li>
              <li><a href="input-buffer.html">Input Buffer</a> - catch jump presses just before landing</li>
              <li><a href="squash-stretch.html">Squash Stretch</a> - visual feedback that matches the jump's force</li>
              <li><a href="double-jump.html">Double Jump</a> - extend the vocabulary mid-air</li>
            </ul>
          </div>
        </div>

        <!-- CRAFT REGISTER -->
        <div class="register register--craft collapsed">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Craft <span class="register-label">- for educators</span>
          </div>
          <div class="register-content">
            <h3>Why This Matters</h3>
            <p>Variable jump is where students first encounter <strong>input as expression</strong>. The same button press can mean different things based on how it's performed. This is fundamental to understanding how videogames create nuanced control.</p>

            <h3>Teaching Sequence</h3>
            <ol>
              <li>Start with Basic Jump - establish baseline</li>
              <li>Switch to Variable Jump with same base parameters</li>
              <li>Have students <em>feel</em> the difference before explaining</li>
              <li>Then explain the mechanism</li>
            </ol>

            <h3>Common Student Misconceptions</h3>
            <p><strong>"Variable jump is just two jump heights":</strong> Students sometimes implement it as binary (tap = short, hold = tall). The real technique is continuous shaping.</p>

            <p><strong>"The player decides at jump start":</strong> No - the player decides <em>during</em> the jump. The arc is shaped in real-time. This is what makes it feel responsive.</p>

            <h3>Assessment</h3>
            <ul>
              <li>Can they explain why jumpCutMultiplier matters for responsiveness?</li>
              <li>Can they tune for a specific feel (floaty vs. snappy) deliberately?</li>
              <li>Can they articulate when basic jump would be better than variable jump?</li>
            </ul>
          </div>
        </div>

        <!-- THEORY REGISTER -->
        <div class="register register--theory collapsed">
          <div class="register-header" onclick="this.parentElement.classList.toggle('collapsed')">
            Theory <span class="register-label">- deeper grounding</span>
          </div>
          <div class="register-content">
            <h3>Heritage Notes</h3>
            <p>Variable jump emerged in the <strong>early 1980s</strong> as designers realized fixed jumps felt unresponsive. <em>Super Mario Bros.</em> (1985) is the canonical example, but the technique appeared earlier in various forms.</p>

            <p>The problem it solved: <strong>fixed jumps force level design to accommodate the jump, not the player.</strong> With variable jump, the player adapts to the level.</p>

            <h3>The Expression Problem</h3>
            <p>Variable jump raises a design question: <strong>how much should the player be able to express through a single input?</strong></p>

            <p>A single button press can produce many different outcomes based on:</p>
            <ul>
              <li>How long it's held</li>
              <li>When it's pressed (coyote time)</li>
              <li>What direction is held simultaneously</li>
              <li>What state the character is in</li>
            </ul>

            <p>This is the beginning of <a href="../framework/gesture.html" class="term">Gesture</a> as a concept - the player's input and the videogame's response form a complete expressive unit.</p>

            <h3>The Celeste Refinement</h3>
            <p><em>Celeste</em> (2018) represents the current state of the art for variable jump. It combines variable height, generous coyote time, input buffering, distinct fall gravity, and air dash integration. The result feels <strong>precise but forgiving</strong>.</p>
          </div>
        </div>

        <hr>

        <h2>Related</h2>
        <ul>
          <li><a href="basic-jump.html">Basic Jump</a> - simpler version without variable height</li>
          <li><a href="double-jump.html">Double Jump</a> - extending the variable jump vocabulary</li>
          <li><a href="input-setup.html">Input Setup</a> - required InputReader system</li>
          <li><a href="../framework/gesture.html">Gesture</a> - the variable jump as a complete gesture</li>
        </ul>

        <h2>Glossary Terms</h2>
        <ul>
          <li><a href="../glossary.html#coyote-time" class="term">Coyote Time</a> - grace period for jump input</li>
          <li><a href="../glossary.html#input-buffer" class="term">Input Buffer</a> - remembering inputs for grace</li>
          <li><a href="../glossary.html#game-feel" class="term">Game Feel</a> - the experience of controlling a videogame</li>
        </ul>

      </div>
    </main>
  </div>

  <script src="../../js/main.js"></script>
</body>
</html>
